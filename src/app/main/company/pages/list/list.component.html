<div class="main" [class.clicked-outside]="isClickedOutside">
  <div class="topPanel">
    <div class="topPanel__left" >
      <button mat-button class="topPanel__button" (click)="openAddCompanyDialog()">Add New Copmany</button>
    </div>
    <div class="container">
      <app-widget [background]="'linear-gradient(to right, #141e30, #243b55)'" [iconClass]="'location_city'" [value]="totalItem.length.toString()" [label]="'Total Companies'"></app-widget>
      <app-widget [background]="'linear-gradient(to right, #141e30, #243b55)'" [iconClass]="'account_balance'" [value]="totalItem.length.toString()" [label]="'Active Companies'"></app-widget>
    </div>
  </div>
  <div class="div1">
    <div *ngIf="isLoading; else table">
      <div *ngFor="let item of totalItem">
        <app-content-loader></app-content-loader>
      </div>
    </div>

    <mat-form-field class="mat-form-field-filter" >
      <mat-label>Search</mat-label>
      <input matInput (keyup)="applyFilter($event)" placeholder="Search" #input>
    </mat-form-field>

    <div class="mat-elevation-z8" >
      <table mat-table [dataSource]="dataSource">
        <ng-template #table>
          <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column">
            <th mat-header-cell *matHeaderCellDef>{{ column | titlecase }}</th>
            <td mat-cell *matCellDef="let copmany" (click)="onRowClicked(copmany,$event)">{{ copmany[column] }}</td>
          </ng-container>
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let copmany">
              <mat-icon class="delButton" (click)="onDeleteCompany(copmany)">delete</mat-icon>
              <mat-icon class="UpdateButton" (click)="onUpdateCompany(copmany)">edit</mat-icon>
            </td>
          </ng-container>
        </ng-template>
        <tr mat-header-row *matHeaderRowDef="displayedColumns.concat('actions')"></tr>
        <tr mat-row *matRowDef="let row; columns: displayedColumns.concat('actions');"></tr>
      </table>
      <mat-paginator [pageSizeOptions]="[5, 10, 25, 100]" aria-label="Select page of copmanys"></mat-paginator>
    </div>
  </div>
  <div class ="right">
    <div class="div2">
      <div class="right-div-header">
        <h3>Company Location</h3>
      </div>
      <div class="right-div-body">
        <app-geo-card></app-geo-card>
      </div>
    </div>
    <div class="div3">
      <div class="right-div-body">
        <app-list-associate [associates]="filteredAssociated"></app-list-associate>
      </div>
    </div>
  </div>
</div>
